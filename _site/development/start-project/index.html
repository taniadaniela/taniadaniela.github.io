<p>If you have been coding in the JS ecosystem for a while you’re probably familiar
with Webpack and React, but this post is not about them :troll:
Instead this post is about creating an app with <a href="https://preactjs.com/">Preact</a>,
<a href="https://www.typescriptlang.org/">Typescript</a> and <a href="https://parceljs.org/">Parcel</a>.</p>

<h3 id="but-why">But, why?</h3>
<p>Good question, the reason because I’ve chosen these tools is because I wanted a lightweight
app without too much configuration (that’s why Parcel and Preact) and I wanted to dive into
the static checking and typing world that Typescript provides. And plus to those reasons I’m
a developer, I like trying new technologies and having an opinion with a background to
support it.</p>

<h3 id="lets-get-into-the-technology">Let’s get into the technology</h3>
<p>First we need nodeJS, I like to use <a href="https://github.com/asdf-vm/asdf">asdf version manager</a>.<br />
Install <a href="https://github.com/asdf-vm/asdf-nodejs.git">asdf nodeJS plugin</a>: <code class="highlighter-rouge">asdf plugin-add nodejs</code></p>

<p>Now we can go ahead and create the app folder:<br />
<code class="highlighter-rouge">mkdir your_app</code><br />
<code class="highlighter-rouge">cd your_app</code><br />
<code class="highlighter-rouge">npm init</code></p>

<p>With <code class="highlighter-rouge">npm init</code> we’ll get two important files, <code class="highlighter-rouge">package.json</code> and <code class="highlighter-rouge">package-lock.json</code>. These files will
contain the dependencies.</p>

<p>Add parcel, preact and typescript to the dependencies: <br />
<code class="highlighter-rouge">npm i typescript@next preact parcel-bundler ts-loader --save</code>.</p>

<p>Your <code class="highlighter-rouge">package.json</code> will look similar to this:</p>
<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your_app"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nt">"main"</span><span class="p">:</span><span class="w"> </span><span class="s2">"y"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"build"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"you"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ISC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"preact"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^10.4.1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ts-loader"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^7.0.4"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"typescript"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^4.0.0-dev.20200514"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"parcel-bundler"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^1.12.4"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"sass"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^1.26.5"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>
<p>The <code class="highlighter-rouge">package-lock.json</code> will get auto populated, don’t edit it directly.</p>

<h4 id="typescript-config">Typescript config</h4>
<p>You will need a file to indicate typescript configuration:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>tsconfig.json
{
  "compilerOptions": {
    "outDir": "./dist",
    "sourceMap": true,
    "noImplicitAny": true,
    "module": "es6",
    "moduleResolution": "node",
    "target": "es6",
    "jsx": "react",
    "jsxFactory": "h"
  },
  "include": ["./src/**/*"]
}
</code></pre>
</div>
<p>This file indicates you have a <code class="highlighter-rouge">dist</code> folder for the compiled files and <code class="highlighter-rouge">src</code> folder for the source files, so don’t forget to create those folders (or use the names you like).</p>

<h4 id="parcel-config">Parcel config</h4>
<p>You will need a html entry point:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>index.html
<span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span>
      <span class="na">content=</span><span class="s">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"ie=edge"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Your App Name<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>

  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"src/index.tsx"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>

<span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>
<p>In this file the src for the script is the main file in your src folder, in my case <code class="highlighter-rouge">src/index.tsx</code>.</p>

<p>And we need the parcel scripts to start and build our app, in <code class="highlighter-rouge">package.json</code> in the scripts section add:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>"scripts": {
    "start": "parcel index.html",
    "build": "parcel build index.html"
  },
</code></pre>
</div>

<h4 id="sample-files">Sample files</h4>
<p>We need a HelloWorld component:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>src/HelloWorld.tsx
import { h, Component } from 'preact';

export interface HelloWorldProps {
  name: string
}

export default class HelloWorld extends Component&lt;HelloWorldProps, any&gt; {
  render(props) {
    return &lt;p&gt;Hello {props.name}!&lt;/p&gt;
  }
}
</code></pre>
</div>
<p>And we’ll use that in our main file:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>src/index.tsx
import { h, render } from 'preact';
//import './styles.scss'; //if you have styles
import HelloWorld from './HelloWorld';

render(&lt;HelloWorld name="world" /&gt;, document.querySelector('#root'));
</code></pre>
</div>

<p>Now we are ready to hit <code class="highlighter-rouge">npm start</code> and have our app displayed on the browser.</p>

